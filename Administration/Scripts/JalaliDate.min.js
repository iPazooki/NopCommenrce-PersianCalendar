function JalaliDate(){this.g_days_in_month=[31,28,31,30,31,30,31,31,30,31,30,31];this.j_days_in_month=[31,31,31,31,31,31,30,30,30,30,30,29];this.jalaliToGregorian=function(n,t,i){var r,f,e,u,h,c;n=parseInt(n);t=parseInt(t);i=parseInt(i);var o=n-979,l=t-1,a=i-1,s=365*o+parseInt(o/33)*8+parseInt((o%33+3)/4);for(u=0;u<l;++u)s+=this.j_days_in_month[u];for(s+=a,r=s+79,f=1600+400*parseInt(r/146097),r=r%146097,e=!0,r>=36525&&(r--,f+=100*parseInt(r/36524),r=r%36524,r>=365?r++:e=!1),f+=4*parseInt(r/1461),r%=1461,r>=366&&(e=!1,r--,f+=parseInt(r/365),r=r%365),u=0;r>=this.g_days_in_month[u]+(u==1&&e);u++)r-=this.g_days_in_month[u]+(u==1&&e);return h=u+1,c=r+1,[f,h,c]};this.checkDate=function(n,t,i){return!(n<0||n>32767||t<1||t>12||i<1||i>this.j_days_in_month[t-1]+(t==12&&!((n-979)%33%4)))};this.gregorianToJalali=function(n,t,i){var r,h,o,u,c,l;n=parseInt(n);t=parseInt(t);i=parseInt(i);var f=n-1600,s=t-1,a=i-1,e=365*f+parseInt((f+3)/4)-parseInt((f+99)/100)+parseInt((f+399)/400);for(u=0;u<s;++u)e+=this.g_days_in_month[u];for(s>1&&(f%4==0&&f%100!=0||f%400==0)&&++e,e+=a,r=e-79,h=parseInt(r/12053),r%=12053,o=979+33*h+4*parseInt(r/1461),r%=1461,r>=366&&(o+=parseInt((r-1)/365),r=(r-1)%365),u=0;u<11&&r>=this.j_days_in_month[u];++u)r-=this.j_days_in_month[u];return c=u+1,l=r+1,[o,c,l]};this.setJalali=function(){this.jalalidate=this.gregorianToJalali(this.gregoriandate.getFullYear(),this.gregoriandate.getMonth()+1,this.gregoriandate.getDate());this.jalalidate[1]--};this.getDate=function(){return this.jalalidate[2]};this.getDay=function(){return this.gregoriandate.getDay()};this.getFullYear=function(){return this.jalalidate[0]};this.getHours=function(){return this.gregoriandate.getHours()};this.getMilliseconds=function(){return this.gregoriandate.getMilliseconds()};this.getMinutes=function(){return this.gregoriandate.getMinutes()};this.getMonth=function(){return this.jalalidate[1]};this.getSeconds=function(){return this.gregoriandate.getSeconds()};this.getTime=function(){return this.gregoriandate.getTime()};this.getTimezoneOffset=function(){return 0};this.getUTCDate=function(){return this.gregoriandate.getUTCDate()};this.getUTCDay=function(){return this.gregoriandate.getUTCDay()};this.getUTCFullYear=function(){return this.gregoriandate.getUTCFullYear()};this.getUTCHours=function(){return this.gregoriandate.getUTCHours()};this.getUTCMilliseconds=function(){return this.gregoriandate.getUTCMilliseconds()};this.getUTCMinutes=function(){return this.gregoriandate.getUTCMinutes()};this.getUTCMonth=function(){return this.gregoriandate.getUTCMonth()};this.getUTCSeconds=function(){return this.gregoriandate.getUTCSeconds()};this.getYear=function(){return this.gregoriandate.getYear()};this.setDate=function(n){var t=-1*(this.jalalidate[2]-n),i=this.gregoriandate.setDate(this.gregoriandate.getDate()+t);return this.gregoriandate.setHours(1,0,0,0),this.setJalali(),i};this.setFullYear=function(n,t,i){var o=parseInt(n),r=parseInt(t),u=parseInt(i),f,e;return isNaN(t)&&(r=0),isNaN(i)&&(u=1),r<0&&(r=0),r==12&&(o++,r=0),u<1&&(u=1),f=this.jalaliToGregorian(o,r+1,u),e=this.gregoriandate.setFullYear(f[0],f[1]-1,f[2]),this.gregoriandate.setHours(1,0,0,0),t<0||i<1?(t<0&&(e=this.gregoriandate.setMonth(this.gregoriandate.getMonth()+t)),i<1&&(e=this.gregoriandate.setDate(this.gregoriandate.getDate()+i-1)),this.setHours(1,0,0,0),this.setJalali()):this.jalalidate=[o,r,u],e};this.setHours=function(n,t,i,r){var u=this.gregoriandate.setHours(n,t,i,r);return this.setJalali(),u};this.setMilliseconds=function(n){var t=this.gregoriandate.setMilliseconds(n);return this.setJalali(),t};this.setMinutes=function(n){var t=this.gregoriandate.setMinutes(n);return this.setJalali(),t};this.setMonth=function(n,t){var r=this.jalalidate[0],u=parseInt(n),i=this.jalalidate[2];return isNaN(t)==!1&&(i=parseInt(t)),this.setFullYear(r,u,i)};this.setSeconds=function(n,t){var i=this.gregoriandate.setSeconds(n,t);return this.setJalali(),i};this.setTime=function(n){var t=this.gregoriandate.setTime(n);return this.gregoriandate.setHours(1,0,0,0),this.setJalali(),t};this.setUTCDate=function(n){return this.gregoriandate.setUTCDate(n)};this.setUTCFullYear=function(n,t,i){return this.gregoriandate.setUTCFullYear(n,t,i)};this.setUTCHours=function(n,t,i,r){return this.gregoriandate.setUTCHours(n,t,i,r)};this.setUTCMilliseconds=function(n){return this.gregoriandate.setUTCMilliseconds(n)};this.setUTCMinutes=function(n,t,i){return this.gregoriandate.setUTCMinutes(n,t,i)};this.setUTCMonth=function(n,t){return this.gregoriandate.setUTCMonth(n,t)};this.setUTCSeconds=function(n,t){return this.gregoriandate.setUTCSeconds(n,t)};this.toDateString=function(){return this.jalalidate[0]+"/"+this.jalalidate[1]+"/"+this.jalalidate[2]};this.toISOString=function(){return this.toDateString()};this.toJSON=function(){return this.toDateString()};this.toLocaleDateString=function(){return this.toDateString()};this.toLocaleTimeString=function(){return this.gregoriandate.toLocaleTimeString()};this.toLocaleString=function(){return this.toDateString()+" "+this.toLocaleTimeString()};this.toString=function(){return this.toLocaleString()};this.toTimeString=function(){return this.toLocaleTimeString()};this.toUTCString=function(){return this.gregoriandate.toUTCString()};this.UTC=function(n,t,i,r,u,f,e){return Date.UTC(n,t,i,r,u,f,e)};this.valueOf=function(){return this.gregoriandate.valueOf()};this.gregoriandate=new Date;this.gregoriandate.setHours(1,0,0,0);arguments.length==0||(arguments.length==3?arguments[0]==1900||arguments[0]==2099?this.gregoriandate.setFullYear(arguments[0],arguments[1],arguments[2]):this.setFullYear(arguments[0],arguments[1],arguments[2]):arguments.length==7?(this.setFullYear(arguments[0],arguments[1],arguments[2]),this.setHours(arguments[3],arguments[4],arguments[5],arguments[6])):arguments.length==1&&typeof arguments[0]=="number"?this.gregoriandate.setTime(arguments[0]):arguments.length==1&&typeof arguments[0]=="JalaliDate"&&(this.gregoriandate=arguments[0].gregoriandate));this.setJalali()}JalaliDate.parse=function(n){try{if("string"!=typeof n&&(n=n.toString()),n.indexOf("Date(")>-1){var t=new Date(parseInt(n.replace(/^\/Date\((.*?)\)\/$/,"$1"),10)),i=new JalaliDate(t).getFullYear(),r=new JalaliDate(t).getMonth(),u=new JalaliDate(t).getDate();return new JalaliDate(i,r,u)}var i=parseInt(n.substring(0,4)),r=parseInt(n.substring(5,7)),u=parseInt(n.substring(8,10));return new JalaliDate(i,r-1,u)}catch(f){return new JalaliDate(1300,1,1)}};